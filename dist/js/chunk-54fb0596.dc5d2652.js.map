{"version":3,"sources":["webpack:///./node_modules/date-fns/esm/startOfDay/index.js","webpack:///./src/views/user/messagesList.vue?928c","webpack:///./src/views/user/messagesList.vue?1ee4","webpack:///src/views/user/messagesList.vue","webpack:///./src/views/user/messagesList.vue?8e88","webpack:///./src/views/user/messagesList.vue","webpack:///./node_modules/date-fns/esm/differenceInCalendarDays/index.js"],"names":["startOfDay","dirtyDate","arguments","date","setHours","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","model","value","callback","$$v","setSearchNameUsers","expression","_l","messageInfo","i","key","user_id","img","name","_s","isMessages","getInterval","_e","class","check","scanned","fromid","user","id","text","staticRenderFns","components","userImg","vSearch","data","messList","messServerList","computed","get","searchUsersName","set","SET_SEARCH_USERS","searchField","$store","dispatch","messagesAndUsers","getMessagesAndAllUsers","messUsers","methods","difference","component","MILLISECONDS_IN_DAY","differenceInCalendarDays","dirtyDateLeft","dirtyDateRight","startOfDayLeft","startOfDayRight","timestampLeft","getTime","timestampRight","Math","round"],"mappings":"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","file":"js/chunk-54fb0596.dc5d2652.js","sourcesContent":["import toDate from '../toDate/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the start of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * var result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\n\nexport default function startOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messagesList.vue?vue&type=style&index=0&id=42b3e906&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messagesList.vue?vue&type=style&index=0&id=42b3e906&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"page\"},[_c('h3',{staticClass:\"main-title\"},[_vm._v(\"Сообщения\")]),_c('article',{staticClass:\"substrate\"},[_c('v-search',{attrs:{\"title\":\"Пользователи\",\"className\":\"messages__search\"},model:{value:(_vm.setSearchNameUsers),callback:function ($$v) {_vm.setSearchNameUsers=$$v},expression:\"setSearchNameUsers\"}}),_c('ul',{staticClass:\"messages__list\"},_vm._l((_vm.getUsersmess),function(messageInfo,i){return _c('router-link',{key:i,staticClass:\"message__link\",attrs:{\"to\":'/message/' + messageInfo.user_id,\"tag\":\"li\"}},[_c('user-img',{staticClass:\"message__img\",attrs:{\"src\":{ img: messageInfo.img, name: messageInfo.name }}}),_c('div',{staticClass:\"message__info\"},[_c('div',{staticClass:\"message__header\"},[_c('span',{staticClass:\"message__header-name\"},[_vm._v(\" \"+_vm._s(messageInfo.name))]),(_vm.isMessages(messageInfo))?_c('span',{staticClass:\"message__time\"},[_vm._v(\" \"+_vm._s(_vm.getInterval(messageInfo.date))+\" \")]):_vm._e()]),(_vm.isMessages(messageInfo))?_c('div',{class:['message__last', { check: !messageInfo.scanned }]},[_c('div',{staticClass:\"message__user\"},[(messageInfo.fromid == _vm.user.id)?_c('user-img',{attrs:{\"src\":_vm.user,\"className\":\"sm\"}}):_vm._e(),_c('p',{staticClass:\"message__text\"},[_vm._v(\" \"+_vm._s(messageInfo.text)+\" \")])],1)]):_vm._e()])],1)}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <section class=\"page\">\r\n    <h3 class=\"main-title\">Сообщения</h3>\r\n    <article class=\"substrate\">\r\n      <v-search\r\n        title=\"Пользователи\"\r\n        v-model=\"setSearchNameUsers\"\r\n        className=\"messages__search\"\r\n      />\r\n      <ul class=\"messages__list\">\r\n        <router-link\r\n          v-for=\"(messageInfo, i) in getUsersmess\"\r\n          :key=\"i\"\r\n          :to=\"'/message/' + messageInfo.user_id\"\r\n          tag=\"li\"\r\n          class=\"message__link\"\r\n        >\r\n          <user-img\r\n            :src=\"{ img: messageInfo.img, name: messageInfo.name }\"\r\n            class=\"message__img\"\r\n          ></user-img>\r\n          <div class=\"message__info\">\r\n            <div class=\"message__header\">\r\n              <span class=\"message__header-name\"> {{ messageInfo.name }}</span>\r\n              <span v-if=\"isMessages(messageInfo)\" class=\"message__time\">\r\n                {{ getInterval(messageInfo.date) }}\r\n              </span>\r\n            </div>\r\n            <div\r\n              v-if=\"isMessages(messageInfo)\"\r\n              :class=\"['message__last', { check: !messageInfo.scanned }]\"\r\n            >\r\n              <div class=\"message__user\">\r\n                <user-img\r\n                  v-if=\"messageInfo.fromid == user.id\"\r\n                  :src=\"user\"\r\n                  className=\"sm\"\r\n                ></user-img>\r\n                <p class=\"message__text\">\r\n                  {{ messageInfo.text }}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </router-link>\r\n      </ul>\r\n    </article>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport vSearch from \"@/components/fields/v-search.vue\";\r\nimport userImg from \"@/components/Permanent/img-user\";\r\nimport { hasOwnProperty } from \"@/store/utils/helper\";\r\nimport { mapGetters, mapState, mapMutations } from \"vuex\";\r\nimport { differenceInCalendarDays } from \"date-fns\";\r\nimport { dM } from \"@/plugins/dateFilers\";\r\nexport default {\r\n  components: {\r\n    userImg,\r\n    vSearch\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      messList: [],\r\n      messServerList: []\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapState(\"users\", [\"searchUsersName\"]),\r\n    ...mapGetters(\"messages\", [\"getUsersmess\"]),\r\n    ...mapGetters(\"user\", { user: \"getUserNameIdImg\" }),\r\n    setSearchNameUsers: {\r\n      get() {\r\n        return this.searchUsersName;\r\n      },\r\n      set(searchField) {\r\n        this.SET_SEARCH_USERS(searchField);\r\n        this.$store.dispatch(\"users/searchUsersByName\", searchField);\r\n      }\r\n    },\r\n    messagesAndUsers() {\r\n      if (this.searchUsersName) {\r\n        return this.getMessagesAndAllUsers;\r\n      }\r\n      return this.messUsers;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(\"users\", [\"SET_SEARCH_USERS\"]),\r\n    getInterval(date) {\r\n      let lastMess = new Date(date);\r\n      let difference = differenceInCalendarDays(new Date(), lastMess);\r\n      switch (true) {\r\n        case difference == 0: {\r\n          return \"Сегодня\";\r\n        }\r\n\r\n        case difference == 1: {\r\n          return \"Вчера\";\r\n        }\r\n\r\n        case difference > 30: {\r\n          return dM(lastMess);\r\n        }\r\n\r\n        default:\r\n          return difference + \"д. назад\";\r\n      }\r\n    },\r\n    isMessages(messageObj) {\r\n      return hasOwnProperty(messageObj, \"message_id\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/pages/message\";\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messagesList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./messagesList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./messagesList.vue?vue&type=template&id=42b3e906&scoped=true&\"\nimport script from \"./messagesList.vue?vue&type=script&lang=js&\"\nexport * from \"./messagesList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./messagesList.vue?vue&type=style&index=0&id=42b3e906&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42b3e906\",\n  null\n  \n)\n\nexport default component.exports","import getTimezoneOffsetInMilliseconds from '../_lib/getTimezoneOffsetInMilliseconds/index.js';\nimport startOfDay from '../startOfDay/index.js';\nimport requiredArgs from '../_lib/requiredArgs/index.js';\nvar MILLISECONDS_IN_DAY = 86400000;\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar days\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * var result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * var result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\n\nexport default function differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var startOfDayLeft = startOfDay(dirtyDateLeft);\n  var startOfDayRight = startOfDay(dirtyDateRight);\n  var timestampLeft = startOfDayLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfDayLeft);\n  var timestampRight = startOfDayRight.getTime() - getTimezoneOffsetInMilliseconds(startOfDayRight); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a day is not constant\n  // (e.g. it's different in the day of the daylight saving time clock shift)\n\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY);\n}"],"sourceRoot":""}